!function(e){e.fn.lightBox=function(i){i=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:!1,imageLoading:"/nookandcove/resources/images/lightbox-ico-loading.gif",imageBtnClose:"../resources/images/close1.png",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},i);var t=this;function o(){e("#zindexdiv").css({"z-index":"0"}),e("#lightbox-loading").show(),i.fixedNavigation?e("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide():e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();var t=new Image;t.onload=function(){e("#lightbox-image").attr("src",i.imageArray[i.activeImage][0]);var o=n();e("#jquery-overlay").height(o[1]),function(t,o){var a=e("#lightbox-container-image-box").width(),n=e("#lightbox-container-image-box").height(),r=t+2*i.containerBorderSize,d=o+2*i.containerBorderSize,l=a-r,c=n-d;e("#lightbox-container-image-box").animate({width:r,height:d},i.containerResizeSpeed,function(){e("#lightbox-loading").hide(),e("#lightbox-image").fadeIn(function(){e("#lightbox-container-image-data-box").slideDown("fast"),e("#lightbox-image-details-caption").hide(),i.imageArray[i.activeImage][1]&&e("#lightbox-image-details-caption").html(i.imageArray[i.activeImage][1]).show(),i.imageArray.length>1&&e("#lightbox-image-details-currentNumber").html(i.txtImage+" "+(i.activeImage+1)+" "+i.txtOf+" "+i.imageArray.length).show()}),i.imageArray.length-1>i.activeImage&&(objNext=new Image,objNext.src=i.imageArray[i.activeImage+1][0]),i.activeImage>0&&(objPrev=new Image,objPrev.src=i.imageArray[i.activeImage-1][0])}),0===l&&0===c&&(e.browser.msie?g(250):g(100));e("#lightbox-container-image-data-box").css({width:t}),e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:o+2*i.containerBorderSize})}(t.width,t.height),t.onload=function(){}},t.src=i.imageArray[i.activeImage][0]}function a(){e("#jquery-lightbox").remove(),e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()}),e("#zindexdiv").css({"z-index":"1000"}),e("embed, object, select").css({visibility:"visible"})}function n(){var e,i,t,o;return window.innerHeight&&window.scrollMaxY?(e=window.innerWidth+window.scrollMaxX,i=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(e=document.body.scrollWidth,i=document.body.scrollHeight):(e=document.body.offsetWidth,i=document.body.offsetHeight),self.innerHeight?(t=document.documentElement.clientWidth?document.documentElement.clientWidth:self.innerWidth,o=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(t=document.documentElement.clientWidth,o=document.documentElement.clientHeight):document.body&&(t=document.body.clientWidth,o=document.body.clientHeight),pageHeight=i<o?o:i,pageWidth=e<t?e:t,arrayPageSize=new Array(pageWidth,pageHeight,t,o),arrayPageSize}function r(){var e,i;return self.pageYOffset?(i=self.pageYOffset,e=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(i=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(i=document.body.scrollTop,e=document.body.scrollLeft),arrayPageScroll=new Array(e,i),arrayPageScroll}function g(e){var i=new Date;t=null;do{var t=new Date}while(t-i<e)}return this.unbind("click").click(function(){return function(t,g){if(e("embed, object, select").css({visibility:"hidden"}),function(){e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+i.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+i.imageBtnClose+'"></a></div></div></div></div>');var t=n();e("#jquery-overlay").css({backgroundColor:i.overlayBgColor,opacity:i.overlayOpacity,width:screen.width-12,height:t[1]}).fadeIn();var o=r();e("#jquery-lightbox").css({top:o[1]+t[3]/10-45,left:o[0]}).show(),e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){return a(),!1}),e(window).resize(function(){var i=n();e("#jquery-overlay").css({width:i[0],height:i[1]});var t=r();e("#jquery-lightbox").css({top:t[1]+i[3]/10-45,left:t[0]})})}(),i.imageArray.length=0,i.activeImage=0,1===g.length)i.imageArray.push(new Array(t.getAttribute("href"),t.getAttribute("title")));else for(var d=0;d<g.length;d++)i.imageArray.push(new Array(g[d].getAttribute("href"),g[d].getAttribute("title")));for(;i.imageArray[i.activeImage][0]!==t.getAttribute("href");)i.activeImage++;o()}(this,t),!1})}}(jQuery);